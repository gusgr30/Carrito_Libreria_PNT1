@using Carrito.Models
@using Microsoft.AspNetCore.Http.Extensions
@model IEnumerable<Libro>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Resultados de la búsqueda</h2>

<div class="galeria">
    @foreach (var libro in Model)
    {
        <div class="card">
            <img src="@libro.CoverUrl" alt="@libro.Title" />

            <h2>@libro.Title</h2>

            <p>@libro.Author?.FullName</p>

            <p>$@libro.Price.-</p>
            @{
                if (libro.Stock > 0)
                {
                    <a asp-controller="Carrito"
                       asp-action="Agregar"
                       asp-route-id="@libro.Id"
                       asp-route-returnUrl="@Context.Request.GetEncodedUrl()"
                       class="btn btn-warning">
                        Comprar
                    </a>
                }
                else
                {
                    <a class="btn btn-agotado">
                        Sin Stock
                    </a>
                }
            }
        </div>
    }
</div>
